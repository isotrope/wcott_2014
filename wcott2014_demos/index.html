<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="js/libs/reveal.js-master/css/reveal.min.css">
        <link rel="stylesheet" href="js/libs/reveal.js-master/css/theme/default.css" id="theme">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="js/libs/reveal.js-master/lib/css/zenburn.css">

        <link href="css/wcottawa.css" rel="stylesheet" type="text/css"/>


    </head>
    <body>

        <div class="reveal">
            <div class="slides">
                <section>
                    <h1>Down with Sliders!</h1>
                    <h1>Show them everything!</h1>
                </section>
                <section>
                    <h1>What we’ll cover</h1>
                    <div class="split">
                        <h2 class="half fragment">Masonry</h2>
                        <h2 class="half fragment">WP_Query</h2>
                    </div>
                    <p>We’ll be looking at a JavaScript library called Masonry that ships with WordPress and getting our toes wet with WP_Query, one of the most powerful tools in your WordPress arsenal.</p>
                </section>
                <section>
                    <h1>Masonry</h1>

                    <p class="fragment"><a href="http://masonry.desandro.com/">masonry.desandro.com/</a></p>
                    <p class="fragment">Created by David DeSandro, a designer at Twitter</p>
                    <p class="fragment"><a href="http://desandro.com/">desandro.com</a></p>

                    <p class="fragment">Masonry has a pair of siblings named Isotope and Packery. They’re released by Metafizzy <a href="http://metafizzy.co/">http://metafizzy.co/</a></p>

                </section>

                <section>
                    <section>
                        <h1>WP_Query</h1>
                        <p>If you’ve dived into theme files, chances are that you’ve seen WP_Query at work with functions like <code>query_posts()</code> or <code>get_posts()</code>.</p>
                    </section>
                    <section>
                        <h1>WP_Query</h1>
                        <p>The resulting data was then probably passed through <em>The Loop</em>, its output handled with functions like <code>the_title()</code>, <code>the_content()</code>, <code>the_post_thumbnail()</code>.</p>

                        <p>Today, I’ll show you how you can start leveraging WP_Query to get the info you want for your own custom loops.</p>
                    </section>
                    <section>
                        <h1>WP_Query ressources</h1>
                        <p><a href="http://codex.wordpress.org/Class_Reference/WP_Query">http://codex.wordpress.org/Class_Reference/WP_Query</a></p>
                        <a href="http://codex.wordpress.org/Function_Reference/query_posts">http://codex.wordpress.org/Function_Reference/query_posts</a>
                        <a href="http://codex.wordpress.org/Template_Tags/get_posts">http://codex.wordpress.org/Template_Tags/get_posts</a>
                        <a href="https://codex.wordpress.org/The_Loop">https://codex.wordpress.org/The_Loop</a>
                    </section>
                </section>

                <section>
                    <h1>Will it float?</h1>
                </section>
                <section>
                    <div id="mondrian">

                        <!-- a id="toggle-float" href="#">Toggle Float</a>
                        <a id="toggle-size" href="#">Toggle Size</a>
                        <a id="toggle-masonry" href="#">Toggle Masonry</a -->

                        <div class="split">
                            <div class="half">
                                <h2>Let's layout some content</h2>
                                <p class="fragment roll-in" data-fragment-index="1">We've grabbed some content</p>
                                <p class="fragment fade-in">With the magic of Floats, we can make it line up, side-by-side</p>
                                <span class="fragment fade-in" data-run="DEMOS.toggleFloat"></span>
                                <p class="fragment">...but what if our elements don't all have the same height?</p>
                                <span class="fragment" data-run="DEMOS.toggleSize"></span>
                                <p class="fragment">Gaps!</p>
                                <aside class="notes">
                                    Oh hey, these are some notes. They'll be hidden in your presentation, but you can see them if you open the speaker notes window (hit 's' on your keyboard).
                                </aside>
                                <p class="fragment">That's where Masonry comes in</p>
                                <span class="fragment" data-run="DEMOS.toggleMasonry"></span>
                                <span class="fragment" data-run="DEMOS.toggleMasonryColour"></span>

                            </div>

                            <div id="masonry-container" class="fragment half clearfix" data-fragment-index="2">
                                <div class="box w3 h1 no-size">3x1</div>
                                <div class="box w3 h1 no-size">3x1</div>
                                <div class="box w1 h4 no-size">1x4</div>
                                <div class="box w3 h2 no-size">3x2</div>
                                <div class="box w1 h4 no-size">1x4</div>
                                <div class="box w1 h4 no-size">1x4</div>
                                <div class="box w4 h4 no-size">4x4</div>
                                <div class="box w2 h4 no-size">2x4</div>
                                <div class="box w1 h5 no-size">1x5</div>
                                <div class="box w4 h2 no-size">4x2</div>
                                <div class="box w2 h2 no-size">2x2</div>
                                <div class="box w1 h3 no-size">1x3</div>
                                <div class="box w2 h1 no-size">2x1</div>
                                <div class="box w1 h3 no-size">1x3</div>
                                <div class="box w1 h3 no-size">1x3</div>
                                <div class="box w1 h3 no-size">1x3</div>
                                <div class="box w2 h2 no-size">2x2</div>
                                <div class="box w2 h3 no-size">2x3</div>
                                <div class="box w1 h2 no-size">1x2</div>
                                <div class="box w2 h2 no-size">2x2</div>
                                <div class="box w2 h1 no-size">2x1</div>
                                <div class="box w3 h1 no-size">3x1</div>
                            </div>
                        </div>
                </section>
                <section>
                    <section><h1>It’s all a trick</h1>
                        <p class="fragment">Alright, confession time:</p>
                        <p class="fragment">That last page was a bit of a lie.</p>
                    </section>
                    <section>
                        <p class="fragment">It does really use Masonry, but the elements were in a very specific order.</p>
                        <h2 class="fragment">Why?</h2>
                        <p class="fragment">Because Masonry always keeps the same order for your elements.<br />
                            It won’t do any magic shuffling to try and fill all the gaps.<br />
                            If I was to give it the same elements with a different order, it’ll do its best, but the result might not be what we were expecting.</p>
                    </section>
                    <section>
                        <p>That’s where one of Masonry’s siblings comes in: Packery.</p>
                        <p>Packery uses a bin-packing algorithm. The trade-off is knowing exactly where the elements will fall.</p>
                    </section>
                </section>

                <section>
                    <p>Let’s put our bricks aside for a bit and look at <em>how</em> we can get the content we want.</p>
                </section>

                <section>
                    <section>
                        <h1>Getting the content you <strong>want</strong></h1>
                        <p class="fragment">Whether you want to get content from <em>posts</em> or even a <em>Custom Post Type</em>, the <code>WP_Query</code> class is always there to get the information for you.</p>
                    </section>
                    <section>
                        <p>You might have copy-pasted some code from the Internet that uses <code>get_posts()</code> or <code>query_posts()</code>.</p>
                        <p class="fragment">Chances are that you got <em>some</em> of the results you wanted and a whole slew of problems and weirdness that you weren’t expecting.</p>
                    </section>

                    <section>
                        <img alt="Avoid query_posts() by Rarst.net" src="img/avoid_query_posts.png" />
                    </section>

                    <section>
                        <p>If we’re going to be preparing custom blocks of content, let’s just do it with WP_Query.</p>

                        <p class="fragment">If you check out the <a href="http://codex.wordpress.org/Class_Reference/WP_Query">codex information on WP_Query</a>, I guarantee that you will be overwhelmed.</p>
                    </section>
                    <section>
                        <h1>Don’t worry. This will be (<small>mostly</small>) easy!</h1>

                        <p>With the help of WP_Query we’ll be able to do things like:</p>
                        <ul>
                            <li class="fragment">Get me the 10 latest posts</li>
                            <li class="fragment">Get me the 20 most recent Books (Custom Post Type)</li>
                            <li class="fragment">Get me the last 7 posts in Category X and Y published in 2013 with the tags “awesome” and “sauce” written by “Steve”, order them by Title Descending and don’t mind the Sticky posts</li>
                        </ul>
                    </section>
                    <section>
                        <h1>Seem hard?</h1>
                        <p>It all comes down to breaking up <em>what</em> you want to “ask” WordPress.</p>
                        <p class="fragment">That’s where the <em>arguments</em> come in...</p>

                    </section>
                </section>
                <section>
                    <section>
                        <h1>WP_Query arguments</h1>
                        <p>Before we even start up WP_Query, we’re going to prepare an array of arguments to pass it.</p>
                        <p>This is how we’ll tell WP_Query <em>what</em> we want it to retrieve.</p>
                    </section>
                    <section>
                        <h3>For starters, let’s go for an easy one:<br /><span class="fragment">The 10 latest posts.</span></h3>
                        <p class="fragment">You might want to use this for a widget, a shortcode, or something else altogether.</p>
                    </section>
                    <section>
                        <h2>A "10 latest posts" set of arguments</h2>
                        <pre><code class="language-php" data-trim>
$args = array(
    'posts_per_page' => 10,
    );
                    </code></pre>
                    </section>
                    <section>
                        <pre><code class="language-php" data-trim>
$args = array(
    'posts_per_page' => 10,
    );
                    </code></pre>
                        <p><code>posts_per_page</code> might sound weird.</p>
                        <p>We want 10 posts.<br />That's it.<br />No <em>pages</em>.</p>
                        <p class="fragment">All we’re actually telling it is <em>how many</em> to give us per page.<br />
                            And we’re not using any pagination, so the result <strong><em>will</em></strong> be 10 posts.</p>
                    </section>

                    <section>
                        <blockquote>
                            <p>“But how will it know that we want ‘posts’, in descending order?</p>
                            <p class="fragment"> - Because it can read your miiiiiind!”</p>

                        </blockquote>
                    </section>
                    <section>
                        <p>Actually, it’s because it has defaults.</p>
                        <p class="fragment">Whatever arguments you omit, it will rely on its defaults when returning the information you’ve asked for.</p>
                    </section>
                    <section>
                        <p>When it comes to sorting, the defaults are</p>
                        <pre><code class="language-php" data-trim>
$args = array(
    'orderby'   => 'DESC',
    'order'     => 'date',
    );
                    </code></pre>
                    </section>
                    <section>
                        <div class="fragment">
                            <p>If we go back to our previous arguments, sending </p>
                            <pre><code class="language-php" data-trim>
$args = array(
    'posts_per_page' => 10,
    );
                    </code></pre>
                        </div>
                        <div class="fragment">
                            <p>will result in WP_Query running</p>
                            <pre><code class="language-php" data-trim>
$args = array(
    'posts_per_page'    => 10,
    'orderby'           => 'DESC',
    'order'             => 'date',
    );
                    </code></pre>
                            <p>anyway.</p>
                        </div>
                    </section>
                    <section>
                        The more information you provide, the clearer it will be for you or anyone else reading your code.
                        ...but PLEASE don’t go overboard.

                    </section>
                </section>

                <section>
                    <section>
                        <h2>Enough about arguments</h2>
                        <h1>What now?</h1>
                        <p class="fragment">How do we go from<br /><strong>asking</strong> it for what we want to<br /><strong>displaying</strong> what we want?</p>
                    </section>
                    <section>
                        <h1>Time to go a little Loopy</h1>
                    </section>
                    <section>
                        <p>Up to now, we’ve prepared arguments to pass to WP_Query.</p>
                        <pre class="fragment"><code class="language-php" data-trim>
&lt;?php
$args = array(
    'posts_per_page' => 10,
    );
                    </code></pre>
                        <p class="fragment">Let's feed them to the WP_Query class</p>
                        <pre class="fragment"><code class="language-php" data-trim>
&lt;?php
$args = array(
    'posts_per_page' => 10,
    );

// the query
$the_query = new WP_Query( $args ); ?>
                    </code></pre>
                    </section>
                    <section>
                        <p>From now on, <code>$the_query</code> represents an instance of WP_Query with our arguments passed to it</p>
                        <p class="fragment">All we need to do now, is loop through the results:</p>
                        <pre class="fragment"><code class="language-php" data-trim>
&lt;?php if ( $the_query->have_posts() ) : ?>

  <!-- the loop -->
  &lt;?php while ( $the_query->have_posts() ) : $the_query->the_post(); ?>
    <h2>&lt;?php the_title(); ?></h2>
  &lt;?php endwhile; ?>
  <!-- end of the loop -->

  &lt;?php wp_reset_postdata(); ?>

&lt;?php else:  ?>
  <p>&lt;?php _e( 'Sorry, no posts matched your criteria.', 'your_text_domain' ); ?></p>
&lt;?php endif; ?>
</code></pre>
                    </section>
                    <section>
                        <p>In essence, we're saying:</p>
                        <div class="fragment">
                            <p>If you got some posts</p>
                            <pre><code class="language-php" data-trim>
&lt;?php if ( $the_query->have_posts() ) : ?>
                            </code></pre>
                        </div>
                        <div class="fragment">
                            <p>while you have posts, set them up for me</p>
                            <pre><code class="language-php" data-trim>
&lt;?php while ( $the_query->have_posts() ) : $the_query->the_post(); ?>
                            </code></pre>
                        </div>
                        <div class="fragment">
                            <p>and I'll take what I need from that information</p>
                            <pre><code class="language-php" data-trim>
 <h2>&lt;?php the_title(); ?></h2>
                            </code></pre>
                        </div>
                    </section>
                    <section>
                        <p>We also have a little bit of code, in case we don't have any posts to show</p>
                        <pre><code class="language-php" data-trim>
&lt;?php else:  ?>
  <p>&lt;?php _e( 'Sorry, no posts matched your criteria.', 'your_text_domain' ); ?></p>
&lt;?php endif; ?>
                            </code></pre>
                        <div class="fragment">
                            <p>Lastly, within the Loop (if we found posts), we also have a little function called <code>wp_reset_postdata()</code></p>
                           <pre><code class="language-php" data-trim>
  &lt;?php wp_reset_postdata(); ?>
                            </code></pre>
                        </div>
                        <p class="fragment">I'm simply going to ask you to trust me and always include it.<br />
                            It's a habit that will save you a lot of grief when dealing with anything outside your loop.</p>
                    </section>
                </section>
                <section>

                    <section>
                    <h1>Are you going to show me those 10 posts or what??!?</h1>
                    </section>
                    <section>
                        <h2>Let's beef up that last loop a bit.</h2>
                 <img class="fragment" src="img/10postloop_1.png" />
                    </section>
                    <section>
                        <h2>Let's look at the result:</h2>
                        <iframe src="http://localhost/wcott2014/ten-latest-posts/" width="100%" height="650px"></iframe>
                    </section>
                    <section>
                        <h2>Let's brind back our Masonry steps:</h2>
                        <iframe src="http://localhost/wcott2014/ten-latest-posts/" width="100%" height="650px"></iframe>
                    </section>
                </section>


            </div>
        </div>

        <script src="js/libs/jquery-1.9.0/jquery.min.js"></script>
        <script src="js/libs/reveal.js-master/lib/js/head.min.js"></script>
        <script src="js/libs/reveal.js-master/js/reveal.js"></script>
        <script src="js/libs/masonry/masonry.pkgd.min.js"></script>

        <script src="js/all_scripts.js"></script>
    </body>
</html>
